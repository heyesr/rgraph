<!DOCTYPE html >
<html>
<head>
    <link rel="stylesheet" href="demos.css" type="text/css" media="screen" />
    <script src="../libraries/RGraph.common.core.js" ></script>
    <script src="../libraries/RGraph.line.js" ></script>
    <script src="demos.js" ></script>
    <meta name="robots" content="noindex, nofollow" />
</head>
<body>
    <h1>A Line chart with a trendline</h1>
    
    <p>
        <a href="scatter-trendline.html">
            There's a Scatter chart version of this technique that
            you can see here.
        </a>
    </p>

    <div id="rgraph-demo-html" style="padding: 50px; background-color: turquoise; display: inline-block; border: 1px solid gray; border-radius: 3px">
        <canvas id="cvs" width="750" height="250" style="background-color: white; border: 2px solid black">[No canvas support]</canvas>
    </div>
    
    <script>
        DATA   = [1,3,2,5,4,4,7,8,8,6,7,9];
        CONFIG = {
            trendline: true,
            trendlineMargin: 15,
            trendlineDashed: true,
            xaxisLabels: RGraph.MONTHS_SHORT,
            linewidth: 1,
            spline: true,
            shadow: false,
            marginInner: 25,
            tickmarksStyle: 'cross',
            tickmarksStyle: 'dot',
            tickmarksSize: 6,
            backgroundGridVlines: false,
            backgroundGridBorder: false,
            xaxis: false,
            yaxis: false,
            textSize: 16,
            animationTraceCenter: true,
            colors: ['black']
        };
        
        line1 = new RGraph.Line({
            id: 'cvs',
            data: [...DATA],
            options: {
                ...CONFIG
            }
        }).draw();


        // The coordinates of the first (and only) trendline
        var coords = line1.coordsTrendline[0];


        //
        // Calculate the coordinates for the top part of the chart
        // (above the trendline)
        //
        coords_top = [
            [0,coords[0][1]],
            ...coords,
            [line1.canvas.width,coords[1][1]],
            [line1.canvas.width, 0],
            [0,0]
        ];

        //
        // Calculate the coordinates for the bottom part of the chart
        // (below the trendline)
        //
        coords_bottom = [
            [0,coords[0][1]],
            ...coords,
            [line1.canvas.width,coords[1][1]],
            [line1.canvas.width, line1.canvas.height],
            [0,line1.canvas.height]
        ];


        //
        // Now that we have the coordinates clipping can be
        // installed on the chart that's already been drawn
        // (the top part of the chart).
        //
        line1.set('clip', coords_top);








        line2 = new RGraph.Line({
            id: 'cvs',
            data: [...DATA],
            options: {
                ...CONFIG,
                colors: ['red'],
                clip: coords_bottom
            }
        }).draw();
        
        

        //
        // Now draw both of the charts using the RGraph.redraw
        // API function
        //
        RGraph.redraw();
    </script>

    <script>showSource()</script>

</body>
</html>