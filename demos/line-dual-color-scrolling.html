<!DOCTYPE html >
<html>
<head>
    <link rel="stylesheet" href="demos.css" type="text/css" media="screen" />
    <script src="../libraries/RGraph.common.core.js" ></script>
    <script src="../libraries/RGraph.common.dynamic.js" ></script>
    <script src="../libraries/RGraph.line.js" ></script>
    <script src="demos.js" ></script>
    <meta name="robots" content="noindex, nofollow" />
</head>
<body>
    <h1>A tri-color scrolling Line chart</h1>

    <p>
        As well as clipping this could also be implemented by using a
        gradient as well.
    </p>
    
   <div id="rgraph-demo-html">
       <canvas id="cvs" width="600" height="250">[No canvas support]</canvas>
   </div>

    <script>
        data   = [];
        last   = 0;
        delay  = 50;
        config = {
            backgroundGrid: false,
            backgroundBarsColor1: 'white',
            backgroundBarsColor2: 'white',
            title: 'Bandwidth used',
            xaxisTitle: 'Time >>>',
            xaxisTitlePos: 0.5,
            yaxisTitle: 'Bandwidth (MB/s)',
            yaxisPosition: 'right',
            yaxisScaleMax: 50,
            filled: true,
            colors: ['black'],
            marginTop: 45,
            marginBottom: 35,
            marginRight: 50,
            tickmarksStyle: [null,null],
            shadow: false,
            linewidth: 1,
            xaxisTickmarks: null,
            yaxisTickmarks: null,
            yaxisLinewidth: 2,
            xaxisLinewidth: 2
        };
    
        // Pre-pad the data array with null values
        for (var i=0; i<600; ++i) {
            data.push(null);
        }

        function getGraph1(id, data)
        {
            // After creating the chart, store it in a global variable
            if (!window.obj1) {

                var obj1 = new RGraph.Line({
                    id: id,
                    data: data,
                    options: {
                        ...config,
                        clip: 'scale:min-10',
                        filledColors: ['#f00']
                    }
                });
            }

            return obj1;
        }

        function getGraph2(id, data)
        {
            // After creating the chart, store it in a global variable
            if (!window.obj2) {

                var obj2 = new RGraph.Line({
                    id: id,
                    data: data,
                    options: {
                        ...config,
                        clip: 'scale:10-20',
                        filledColors: ['#ff0'],
                    }
                });
            }

            return obj2;
        }

        function getGraph3(id, data)
        {
            // After creating the chart, store it in a global variable
            if (!window.obj3) {

                var obj3 = new RGraph.Line({
                    id: id,
                    data: data,
                    options: {
                        ...config,
                        clip: 'scale:20-max',
                        filledColors: ['#0f0'],
                    }
                });
            }

            return obj3;
        }
        
        obj1 = getGraph1('cvs',data);
        obj2 = getGraph2('cvs',data);
        obj3 = getGraph3('cvs',data);

        obj1.draw();
        obj2.draw();
        obj3.draw();
        
        function draw ()
        {
            // Append a random value on to the array and remove the
            // first value.
            var random = RGraph.random(
                RGraph.isNull(data[data.length - 1]) ? 26 : data[data.length - 1] - 2,
                RGraph.isNull(data[data.length - 1]) ? 24 : data[data.length - 1] + 2
            );

            // Constrain the value to be btween 0 and 50.
            random = Math.max(random, 0);
            random = Math.min(random, 50);

            // Push the new value on to the wend of the array
            data.push(random);
            
            if (data.length > 600) {
                data = RGraph.arrayShift(data);
            }

            obj1.original_data[0] = data;
            obj2.original_data[0] = data;
            obj3.original_data[0] = data;

            // Clear the canvas tag and redraw the chart
            RGraph.clear(obj1.canvas);
            
            obj1.draw();
            obj2.draw();
            obj3.draw();
            
            setTimeout(draw, delay);
        }
        
        // Start the whole thing going
        draw();
        
    </script>
    
    <script>showSource()</script>

</body>
</html>