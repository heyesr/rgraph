<!DOCTYPE html >
<html>
<head>
    <link rel="stylesheet" href="demos.css" type="text/css" media="screen" />
    <script src="../libraries/RGraph.common.core.js" ></script>
    <script src="../libraries/RGraph.common.key.js" ></script>
    <script src="../libraries/RGraph.common.tooltips.js" ></script>
    <script src="../libraries/RGraph.line.js" ></script>
    <script src="demos.js" ></script>
    <meta name="robots" content="noindex, nofollow" />
</head>
<body>    
    <h1>A Line chart with dataset tooltips</h1>

    <div id="rgraph-demo-html">
        <canvas id="cvs" width="600" height="250">[No canvas support]</canvas>
    </div>

    <script>
        new RGraph.Line({
            id:'cvs',
            data: [
                [4,5,8,7,6,4,3],
                [7,1,6,9,4,6,5],
                [8,4,6,5,9,9,8]
            ],
            options: {
                
                // Some custom properties that are used in the
                // tooltips
                _values: [58.3,42.5,62.7],
                _names: ['Bob','David','Gary'],
                
                tooltipsDataset: '<span style="font-style: italic">Results for <b>%{property:_names[%{dataset}]}</b>:</span><br /><span style="font-size: 30pt">%{property:_values[%{dataset}]}%</span>',
                
                backgroundGridVlines: false,
                backgroundGridBorder: false,
                xaxis: false,
                yaxis: false,
                xaxisLabels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
                marginBottom: 35,
                marginInner: 10,
                linewidth: 2,
                shadow: true,
                title: 'A Line chart with dataset tooltips',
                titleOffsety: 5,
                titleBold: true,
                titleSize: 20,
                spline: true,
                tickmarksStyle: 'endcircle',
                tickmarksSize: 5,
                //key: ['Bob','David','Gary'],
                //keyBackground: 'white',
                textSize: 16
            }
        }).draw();
        
        // This ontooltip event listener moves the tooltip to be
        // positioned by the cursor (at the time of the click)
        //
        //.on('tooltip', function (obj)
        //{
        //    var e        = window.event
        //    var tooltip  = RGraph.Registry.get('tooltip');
        //    var [mx, my] = RGraph.getMouseXY(e);
        //    var [cx, cy] = RGraph.getCanvasXY(obj.canvas);
        //    
        //    // Use this to set the position of the tooltip
        //    setTimeout(function()
        //    {
        //        tooltip.style.left = cx + mx - (tooltip.offsetWidth / 2)+ 'px';
        //        tooltip.style.top  = cy + my - tooltip.offsetHeight - 20 + 'px';
        //    },25);
        //});
        
        //.on('tooltip', function (obj)
        //{
        //    //
        //    // You can get the dataset index and the coordinates
        //    // of the key entry by using these properties. This
        //    // also fetches the appropriate color from the RGraph
        //    // object properties (using the index).
        //    //
        //    // If you're not bothered about highlighting the key
        //    // then you can omit this entire ontooltip event
        //    //
        //    var index  = obj.tooltipsDatasetIndex;
        //    var coords = obj.coords.key[index];
        //    var color  = obj.get('colors')[index];
        //    
        //    //
        //    // Highlight the key
        //    //
        //    obj.path(
        //        'ga 0.25 b r % % % % f % ga 1',
        //        coords[0], coords[1],
        //        coords[2], coords[3],
        //        color
        //    );
        //});
    </script>
    
    <script>showSource()</script>

</body>
</html>